<!DOCTYPE html>

{% load staticfiles %} 

<html>
    <head>
        <title>GrubHunt - Find Route</title>

		<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="{% static "javascript/gmaps.js" %}"></script>
		<script src="{% static "javascript/find_route.js" %}"></script>
        
		<meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8" />
		
		<link rel="stylesheet" type="text/css" href="{% static "css/main.css" %}">
		
		<style>
			#map {
				width: 600px;
    			height: 400px;
				float: left;
				padding: 10px;
			}
		</style>
		
    </head>
 
  <body>

<!-- Facebook like button -->
<div id="fb-root"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Header of the webpage-->
  <div id="header">
    		
    <h2 class="alignleft">
          {% if user.is_authenticated %}
          	<a href="/GrubHunt/logout">Logout </a>
          {% else %}  
         	<a href="/GrubHunt/login">Login </a>
          {% endif %}
          <a href="/GrubHunt">/ Home</a>
    </h2>
    		

	<h2 class="alignright">
		<a href="/GrubHunt/vendors">Map View </a>
		<a href="/GrubHunt/list_vendors">/ List View</a>
	</h2>

</div>

<h1>Find the route!</h1>


<div id="wrapper">  
	<!-- Layout as nav mode to display the info of restruant -->
	<div id="nav">
	
		<!-- display info of the vendor -->
		<h3>
		{% if vendor %}
			{% if not vendor.businessName %}
				Name: NoName</br>
		{% else %}
				Name: {{vendor.businessName}}</br>
		{% endif %}

		Description: {{vendor.description}}</br>
		Address: {{vendor.address}}</br>

		<script> 
            $( window ).load(function() {
             console.log("add the food trucks");
             plotFoodTruck({{vendor.latitude}},
             {{vendor.longitude}}, 
              "{{vendor.businessName}}");
           }); 
      	</script>
		{% endif %}
	
	<!-- find route text boxes -->
		<form id="find_route" name="find_route" method="POST" action="#">
            {% csrf_token %}
			
			<!-- Textboxes for inputting from and to position -->
            <label for="origin">Origin:</label> 
			<input type="text" id="from_pos" name="from_pos" placeholder="Your Location" />
			<a id="cur_loc" href="#">Get Current Location</a>
			<br />
			
            <label for="destination">Destination:</label>
			<input type="text" id="to_pos" name="to_pos" value="{{vendor.latitude}},{{vendor.longitude}}" placeholder="Vendor's Location"/>
			</h2>

            <!-- Provide a button to click to submit the form. -->
            <input type="submit" value="Get Route" /> <br>
		</form>
		
	<!-- add to user's favourites button-->
	<!-- calls addToFavourites function when pressed-->
	<button onclick="addToFavourites()"> Add To Favourites</button></br>
	
	<script>
	function addToFavourites(){
	 // need to add the vendor to userprofile's vendors
	}
	</script>
		
	<!-- Twitter button -->	
      <a href="https://twitter.com/share" class="twitter-share-button" data-text="I'm using GrubHunt to check out this cool food vendor!" data-size="large">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      <br/>
     <!-- Facebook like and share button -->
        <div class="fb-like" data-href="http://127.0.0.1:8000/GrubHunt/find_route/{{ vendor.slug }}/" data-width="30px" data-layout="button" data-action="like" data-show-faces="false" data-share="true"></div>
       <br/> 

    <p id="error"></p>
	</div>
	
	
	  
	<div id="map"></div>

	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKhtN-Y5ahiOTzVHtpMLC3bBqs8j6s56Q&callback=initMap"
			async defer></script>
	</div>
  </body>
</html>