<!DOCTYPE html>

{% load staticfiles %} 

<html>
    <head>
        <title>GrubHunt - Food Truck Vendors</title>

		<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="{% static "javascript/gmaps.js" %}"></script>
		<script src="{% static "javascript/find_route.js" %}"></script>
        
		<meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8" />
		
        <style>
          html, body {
            height: 100%;
            margin: 0;
            padding: 0;

          }
           a:link {
      color: #3EA99F;
    }
    a:visited {
      color: #78C7C7;
    }
          h1 {
      color: #3EA99F;
      font-size: 50px;
    }
    h2 {
      color: #3EA99F;
      font-size: 20px;
    }
          #map {
            margin: 0 auto;
            height: 80%;
            width: 80%;
          }
          #header {
      background-color: #657383;

    }


        </style>

    </head>

    <body>
      <div id="header">

        
        <h2 style="text-align:left;float:left;">
          {% if user.is_authenticated %}
          <a href="/GrubHunt/logout">Logout</a></h1>
        {% else %}  
        <a href="/GrubHunt/login">Login</a>
      {% endif %}
    </h1>
        

      <h2 style="text-align:right;float:right;"><a href="/GrubHunt/list_vendors">List View</a></h2>
      <hr style="clear:both;"/>
</div>
		<h1>All food vendors on a map!</h1>
		
    {% if vendor_list %}
      {% for v in vendor_list %}
      <script> 
            $( window ).load(function() {
             console.log("add the food trucks");
             plotFoodTruck({{v.latitude}},
             {{v.longitude}}, 
              "{{v.businessName}}");
           }); 
      </script>
      {% endfor %}
    {% endif %}

	
	<!-- Find Route Functionality -->
<form id="find_route" name="find_route" method="POST" action="#">
            {% csrf_token %}
      
      <!-- Textboxes for inputting from and to position -->
            <label for="origin">Origin:</label> 
      <input type="text" id="from_pos" name="from_pos" placeholder="Your Location" />
      <a id="cur_loc" href="#">Get Current Location</a>
      <br />
      
            <label for="destination">Destination:</label>
      <input type="text" id="to_pos" name="to_pos" value="{{vendor.latitude}},{{vendor.longitude}}" placeholder="Vendor's Location"/>
      <br />


            <!-- Provide a button to click to submit the form. -->
            <input type="submit" value="Get Route" />
		</form>
	
	  
		<div id="map"></div>

		
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKhtN-Y5ahiOTzVHtpMLC3bBqs8j6s56Q&callback=initMap"
			async defer></script>

    </body>
</html>